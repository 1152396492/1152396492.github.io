<!DOCTYPE html>

<html lang="zh-CN">

<head>
    
    <title>分布式MOM作业 - Amentiraz blog</title>
    <meta charset="UTF-8">
    <meta name="description" content="">
    <meta name="keywords" content="">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=5">
    
    

    <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon" />
    <meta name="description" content="分布式作业">
<meta property="og:type" content="article">
<meta property="og:title" content="分布式MOM作业">
<meta property="og:url" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/index.html">
<meta property="og:site_name" content="Amentiraz blog">
<meta property="og:description" content="分布式作业">
<meta property="og:locale" content="zh_CN">
<meta property="og:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/homework.png">
<meta property="og:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/evm.png">
<meta property="og:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/stream.jpg">
<meta property="og:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/Show1.png">
<meta property="og:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/topic.png">
<meta property="article:published_time" content="2024-05-10T17:07:10.000Z">
<meta property="article:modified_time" content="2024-05-10T12:55:23.911Z">
<meta property="article:author" content="Amentiraz">
<meta property="article:tag" content="代码">
<meta property="article:tag" content="分布式">
<meta name="twitter:card" content="summary">
<meta name="twitter:image" content="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/homework.png">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/combine/npm/highlight.js@9.15.8/styles/atom-one-dark.css,npm/justifiedGallery@3.8.1/dist/css/justifiedGallery.min.css,gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css,npm/hexo-theme-nexmoe@latest/source/lib/mdui_043tiny/css/mdui.css,npm/hexo-theme-nexmoe@latest/source/lib/iconfont/iconfont.css?v=233" crossorigin>
    <link rel="stylesheet" href="/css/style.css?v=1727004197791">
    
    <link rel="stylesheet" href="/lib/iconfont/iconfont.css?v=1727004197791">
<meta name="generator" content="Hexo 6.0.0"></head>

<body class="mdui-drawer-body-left">
    
    <div id="nexmoe-background">
        <div class="nexmoe-bg" style="background-image: url(https://i.postimg.cc/XNHkwZh8/wallhaven-pkw6y3.jpg)"></div>
        <div class="mdui-appbar mdui-shadow-0">
            <div class="mdui-toolbar">
                <a mdui-drawer="{target: '#drawer', swipe: true}" title="menu" class="mdui-btn mdui-btn-icon mdui-ripple"><i class="mdui-icon nexmoefont icon-menu"></i></a>
                <div class="mdui-toolbar-spacer"></div>
                <!--<a href="javascript:;" class="mdui-btn mdui-btn-icon"><i class="mdui-icon material-icons">search</i></a>-->
                <a href="/" title="Amentiraz" class="mdui-btn mdui-btn-icon"><img src="https://i.postimg.cc/P5FyTCbJ/20220606230333.jpg" alt="Amentiraz"></a>
            </div>
        </div>
    </div>
    <div id="nexmoe-header">
        <div class="nexmoe-drawer mdui-drawer" id="drawer">
    <div class="nexmoe-avatar mdui-ripple">
        <a href="/" title="Amentiraz">
            <img src="https://i.postimg.cc/P5FyTCbJ/20220606230333.jpg" alt="Amentiraz" alt="Amentiraz">
        </a>
    </div>
    <div class="nexmoe-count">
        <div><span>文章</span>36</div>
        <div><span>标签</span>28</div>
        <div><span>分类</span>6</div>
    </div>
    <div class="nexmoe-list mdui-list" mdui-collapse="{accordion: true}">
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/" title="回到首页">
            <i class="mdui-list-item-icon nexmoefont icon-home"></i>
            <div class="mdui-list-item-content">
                回到首页
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/about.html" title="关于博客">
            <i class="mdui-list-item-icon nexmoefont icon-info-circle"></i>
            <div class="mdui-list-item-content">
                关于博客
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/PY.html" title="我的朋友">
            <i class="mdui-list-item-icon nexmoefont icon-unorderedlist"></i>
            <div class="mdui-list-item-content">
                我的朋友
            </div>
        </a>
        
        <a class="nexmoe-list-item mdui-list-item mdui-ripple false" href="/archive.html" title="文章归档">
            <i class="mdui-list-item-icon nexmoefont icon-container"></i>
            <div class="mdui-list-item-content">
                文章归档
            </div>
        </a>
        
    </div>
    <aside id="nexmoe-sidebar">
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-search">
         
            <form id="search_form" action_e="https://cn.bing.com/search?q=site:nexmoe.com" onsubmit="return search();">
                <label><input id="search_value" name="q" type="search" placeholder="搜索"></label>
            </form>
         
    </div>
</div>
    
    <div class="nexmoe-widget-wrap">
    <div class="nexmoe-widget nexmoe-social">
        <a class="mdui-ripple" href="https://jq.qq.com/?_wv=1027&k=5CfKHun" target="_blank" mdui-tooltip="{content: 'QQ群'}" style="color: rgb(249, 174, 8);background-color: rgba(249, 174, 8, .1);">
            <i class="nexmoefont icon-QQ"></i>
        </a><a class="mdui-ripple" href="https://space.bilibili.com/20238211" target="_blank" mdui-tooltip="{content: '哔哩哔哩'}" style="color: rgb(231, 106, 141);background-color: rgba(231, 106, 141, .15);">
            <i class="nexmoefont icon-bilibili"></i>
        </a><a class="mdui-ripple" href="https://github.com/nexmoe/" target="_blank" mdui-tooltip="{content: 'GitHub'}" style="color: rgb(25, 23, 23);background-color: rgba(25, 23, 23, .15);">
            <i class="nexmoefont icon-github"></i>
        </a>
    </div>
</div>
    
    
  <div class="nexmoe-widget-wrap">
    <h3 class="nexmoe-widget-title">文章分类</h3>
    <div class="nexmoe-widget">

      <ul class="category-list">

        


        

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/代码/">代码</a>
          <span class="category-list-count">3</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/学习笔记/">学习笔记</a>
          <span class="category-list-count">5</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/数学建模/">数学建模</a>
          <span class="category-list-count">4</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/生活/">生活</a>
          <span class="category-list-count">15</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/算法/">算法</a>
          <span class="category-list-count">6</span>
        </li>

        

        <li class="category-list-item">
          <a class="category-list-link" href="/categories/论文/">论文</a>
          <span class="category-list-count">1</span>
        </li>

        
      </ul>

    </div>
  </div>


    
    
  <div class="nexmoe-widget-wrap">
    <div id="randomtagcloud" class="nexmoe-widget tagcloud nexmoe-rainbow">
      <a href="/tags/C%E8%AF%AD%E8%A8%80/" style="font-size: 14px;">C语言</a> <a href="/tags/DP/" style="font-size: 10px;">DP</a> <a href="/tags/Dijkstra/" style="font-size: 10px;">Dijkstra</a> <a href="/tags/LCA/" style="font-size: 10px;">LCA</a> <a href="/tags/Matlab/" style="font-size: 10px;">Matlab</a> <a href="/tags/TOPSIS/" style="font-size: 12px;">TOPSIS</a> <a href="/tags/Tarjan/" style="font-size: 10px;">Tarjan</a> <a href="/tags/c%E8%AF%AD%E8%A8%80/" style="font-size: 10px;">c语言</a> <a href="/tags/python/" style="font-size: 10px;">python</a> <a href="/tags/%E4%B9%A6%E8%AF%84/" style="font-size: 16px;">书评</a> <a href="/tags/%E4%BB%A3%E7%A0%81/" style="font-size: 14px;">代码</a> <a href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" style="font-size: 14px;">分布式</a> <a href="/tags/%E5%A4%8D%E4%B9%A0%E8%B5%84%E6%96%99/" style="font-size: 10px;">复习资料</a> <a href="/tags/%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/" style="font-size: 16px;">学习笔记</a> <a href="/tags/%E5%B1%82%E6%AC%A1%E5%88%86%E6%9E%90%E6%B3%95/" style="font-size: 10px;">层次分析法</a> <a href="/tags/%E6%8C%87%E9%92%88/" style="font-size: 10px;">指针</a> <a href="/tags/%E6%8F%92%E5%80%BC%E7%AE%97%E6%B3%95/" style="font-size: 10px;">插值算法</a> <a href="/tags/%E6%95%B0%E5%AD%A6%E5%BB%BA%E6%A8%A1/" style="font-size: 16px;">数学建模</a> <a href="/tags/%E6%9D%82/" style="font-size: 10px;">杂</a> <a href="/tags/%E7%94%9F%E6%B4%BB/" style="font-size: 20px;">生活</a> <a href="/tags/%E7%AC%94%E8%AE%B0/" style="font-size: 10px;">笔记</a> <a href="/tags/%E7%AE%97%E6%B3%95/" style="font-size: 18px;">算法</a> <a href="/tags/%E7%BA%BF%E6%AE%B5%E6%A0%91/" style="font-size: 10px;">线段树</a> <a href="/tags/%E7%BB%93%E6%9E%84/" style="font-size: 10px;">结构</a> <a href="/tags/%E8%AE%BA%E6%96%87/" style="font-size: 10px;">论文</a> <a href="/tags/%E8%AF%97/" style="font-size: 10px;">诗</a> <a href="/tags/%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0/" style="font-size: 12px;">读书笔记</a> <a href="/tags/%E9%A2%98%E8%A7%A3/" style="font-size: 10px;">题解</a>
    </div>
    
  </div>

    
</aside>
    <div class="nexmoe-copyright">
        &copy; 2024 Amentiraz
        Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
        & <a href="https://github.com/theme-nexmoe/hexo-theme-nexmoe" target="_blank">Nexmoe</a>
        <br><a target="_blank" href="https://www.upyun.com/?utm_source=lianmeng&utm_medium=referral"><img src="https://i.dawnlab.me/c0268c1e6cfd0863d6ba35be1575941a.png" width="150px"></a><script data-ad-client="ca-pub-2058306854838448" async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
    </div>
</div><!-- .nexmoe-drawer -->
    </div>
    <div id="nexmoe-content">
        <div class="nexmoe-primary">
            <div class="nexmoe-post">

  <article>
      
          <div class="nexmoe-post-cover" style="padding-bottom: 66.66666666666666%;"> 
              <img data-src="https://i.postimg.cc/XNHkwZh8/wallhaven-pkw6y3.jpg" data-sizes="auto" alt="分布式MOM作业" class="lazyload">
              <h1>分布式MOM作业</h1>
          </div>
      
      
      <div class="nexmoe-post-meta nexmoe-rainbow" style="margin:10px 0!important;">
    <a><i class="nexmoefont icon-calendar-fill"></i>2024年05月10日</a>
    <a><i class="nexmoefont icon-areachart"></i>2.6k 字</a>
    <a><i class="nexmoefont icon-time-circle-fill"></i>大概 14 分钟</a>
</div>

      

      <p>分布式作业</p>
<span id="more"></span>
<h1 id="问题重述"><a href="#问题重述" class="headerlink" title="问题重述"></a>问题重述</h1><p><img src="/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/homework.png"> </p>
<h1 id="实验原理"><a href="#实验原理" class="headerlink" title="实验原理"></a>实验原理</h1><p>这段代码涉及到Java消息服务（JMS）和消息代理（Apache ActiveMQ），它们是用于构建分布式、可靠和异步消息传递系统的关键技术。</p>
<p><strong>JMS</strong> 是 Java 中用于发送和接收消息的 API 规范，它提供了一种标准的方式来创建、发送、接收和管理消息。JMS 有两种消息传递模型：点对点（Point-to-Point）和发布&#x2F;订阅（Publish&#x2F;Subscribe）。在这个例子中，我们使用的是发布&#x2F;订阅模型。</p>
<p><strong>消息代理</strong> 是一个中间件系统，负责将消息从发送者传递给接收者。Apache ActiveMQ 是一个流行的开源消息代理，它实现了 JMS 规范，并提供了可靠的消息传递机制。在这个例子中，ActiveMQ 充当了消息代理的角色，负责管理消息的传递和路由。</p>
<h1 id="开发环境"><a href="#开发环境" class="headerlink" title="开发环境"></a>开发环境</h1><h2 id="软件版本"><a href="#软件版本" class="headerlink" title="软件版本"></a>软件版本</h2><p>Windows11<br>Eclipse IDE for Java Developers - 2022-03<br>Java 1.8<br>Active MQ 6.1.0<br>Xchart 3.8.1<br>Maven3.6.1</p>
<p><img src="/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/evm.png"></p>
<h2 id="pom文件配置"><a href="#pom文件配置" class="headerlink" title="pom文件配置"></a>pom文件配置</h2><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br></pre></td><td class="code"><pre><code class="hljs xml"><span class="hljs-meta">&lt;?xml version=&quot;1.0&quot; encoding=&quot;UTF-8&quot;?&gt;</span><br><span class="hljs-tag">&lt;<span class="hljs-name">project</span> <span class="hljs-attr">xmlns</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xmlns:xsi</span>=<span class="hljs-string">&quot;http://www.w3.org/2001/XMLSchema-instance&quot;</span></span><br><span class="hljs-tag">         <span class="hljs-attr">xsi:schemaLocation</span>=<span class="hljs-string">&quot;http://maven.apache.org/POM/4.0.0 http://maven.apache.org/xsd/maven-4.0.0.xsd&quot;</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">modelVersion</span>&gt;</span>4.0.0<span class="hljs-tag">&lt;/<span class="hljs-name">modelVersion</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">properties</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">project.build.sourceEncoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.encoding</span>&gt;</span>UTF-8<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.encoding</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">java.version</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">java.version</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.source</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.source</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">maven.compiler.target</span>&gt;</span>21<span class="hljs-tag">&lt;/<span class="hljs-name">maven.compiler.target</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">properties</span>&gt;</span><br><br>    <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>com.xidian.dc.mq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>mq-topic<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>    <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.0-SNAPSHOT<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>    <br>    <span class="hljs-tag">&lt;<span class="hljs-name">dependencies</span>&gt;</span>     <br>        <span class="hljs-comment">&lt;!-- https://mvnrepository.com/artifact/org.apache.activemq/activemq-all --&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.knowm.xchart<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>xchart<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.8.1<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.jfree<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jfreechart<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>1.5.3<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>jakarta.jms<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>jakarta.jms-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>3.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.activemq<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>activemq-all<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>6.1.0<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j-api<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.17.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>        <span class="hljs-tag">&lt;<span class="hljs-name">dependency</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">groupId</span>&gt;</span>org.apache.logging.log4j<span class="hljs-tag">&lt;/<span class="hljs-name">groupId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">artifactId</span>&gt;</span>log4j-core<span class="hljs-tag">&lt;/<span class="hljs-name">artifactId</span>&gt;</span><br>            <span class="hljs-tag">&lt;<span class="hljs-name">version</span>&gt;</span>2.17.2<span class="hljs-tag">&lt;/<span class="hljs-name">version</span>&gt;</span><br>        <span class="hljs-tag">&lt;/<span class="hljs-name">dependency</span>&gt;</span><br>    <span class="hljs-tag">&lt;/<span class="hljs-name">dependencies</span>&gt;</span><br><br>    <br><span class="hljs-tag">&lt;/<span class="hljs-name">project</span>&gt;</span><br><br></code></pre></td></tr></table></figure>

<h1 id="设计思路"><a href="#设计思路" class="headerlink" title="设计思路"></a>设计思路</h1><h2 id="构架图"><a href="#构架图" class="headerlink" title="构架图"></a>构架图</h2><p><img src="/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/stream.jpg"></p>
<h2 id="各个代码的用途"><a href="#各个代码的用途" class="headerlink" title="各个代码的用途"></a>各个代码的用途</h2><h3 id="Publisher"><a href="#Publisher" class="headerlink" title="Publisher"></a>Publisher</h3><p>随机信号产生器微服务，生成正太分布的随机数字并发布在MYTOPIC服务上<br>生成方式’double randomNumner &#x3D; random.nextGaussian() * stdDev + mean ; ‘<br>通过传输main函数的变量来区分不同的产生器</p>
<h3 id="ASyncConsumer"><a href="#ASyncConsumer" class="headerlink" title="ASyncConsumer"></a>ASyncConsumer</h3><p>随机信号统计分析微服务，并将处理后的数据发布在DATA服务上<br>storeMessage:对传输过来的数据进行处理并存储<br>publisher:对存储的数据进行统计和发布</p>
<h3 id="MyListener"><a href="#MyListener" class="headerlink" title="MyListener"></a>MyListener</h3><p>实现MessageListener接口，并接收存储数据。实现对ASyncConsumer的consumer的处理</p>
<h3 id="ShowConsumer"><a href="#ShowConsumer" class="headerlink" title="ShowConsumer"></a>ShowConsumer</h3><p>实时数据显示微服务，并调用RealTimeChart实现数据的可视化<br>paint:通过调用RealTimeChart里面的plot来实现实时绘制图像</p>
<h3 id="MyListener1"><a href="#MyListener1" class="headerlink" title="MyListener1"></a>MyListener1</h3><p>实现MessageListener接口，并接收存储数据。实现对ShowConsumer的consumer的处理</p>
<h3 id="RealTimeChart"><a href="#RealTimeChart" class="headerlink" title="RealTimeChart"></a>RealTimeChart</h3><p>实现实时画图</p>
<h1 id="Commands"><a href="#Commands" class="headerlink" title="Commands"></a>Commands</h1><p>mvn clean<br>mvn compile</p>
<p>mvn exec:java -Dexec.mainClass&#x3D;”ASyncConsumer”</p>
<p>mvn exec:java -Dexec.mainClass&#x3D;”ShowConsumer”</p>
<p>mvn exec:java -Dexec.mainClass&#x3D;”Publisher” -Dexec.args&#x3D;”1”<br>mvn exec:java -Dexec.mainClass&#x3D;”Publisher” -Dexec.args&#x3D;”2”<br>mvn exec:java -Dexec.mainClass&#x3D;”Publisher” -Dexec.args&#x3D;”3”<br>mvn exec:java -Dexec.mainClass&#x3D;”Publisher” -Dexec.args&#x3D;”4”</p>
<h1 id="JAVA程序"><a href="#JAVA程序" class="headerlink" title="JAVA程序"></a>JAVA程序</h1><h2 id="MyListener-java"><a href="#MyListener-java" class="headerlink" title="MyListener.java"></a>MyListener.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageListener;<br><span class="hljs-keyword">import</span> jakarta.jms.ObjectMessage;<br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.TextMessage;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyListener</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MessageListener</span> </span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> ASyncConsumer consumer ; <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyListener</span> <span class="hljs-params">( ASyncConsumer consumer )</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.consumer = consumer ; <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMessage</span><span class="hljs-params">(Message message)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String text = ((TextMessage) message).getText() ; <br>            System.out.println(<span class="hljs-string">&quot;Received a message: &quot;</span>+text);<br>            consumer.storeMessage(text);<br>            consumer.publisher(<span class="hljs-string">&quot;ACK&quot;</span>);<br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>&#125;<br><br></code></pre></td></tr></table></figure>
<h2 id="Publisher-java"><a href="#Publisher-java" class="headerlink" title="Publisher.java"></a>Publisher.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><code class="hljs java"><span class="hljs-keyword">import</span> jakarta.jms.Connection;<br><span class="hljs-keyword">import</span> java.util.Random ; <br><span class="hljs-keyword">import</span> jakarta.jms.ConnectionFactory;<br><span class="hljs-keyword">import</span> jakarta.jms.Destination;<br><span class="hljs-keyword">import</span> jakarta.jms.JMSException;<br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageProducer;<br><span class="hljs-keyword">import</span> jakarta.jms.ObjectMessage;<br><span class="hljs-keyword">import</span> jakarta.jms.Session;<br><span class="hljs-keyword">import</span> jakarta.jms.Topic;<br><br><span class="hljs-keyword">import</span> org.apache.activemq.ActiveMQConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Publisher</span> </span>&#123;<br><br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> String brokerURL = <span class="hljs-string">&quot;tcp://localhost:61616&quot;</span>;<br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">static</span> ConnectionFactory factory;<br>    <span class="hljs-keyword">private</span> Connection connection;<br>    <span class="hljs-keyword">private</span> Session session;<br>    <span class="hljs-keyword">private</span> MessageProducer producer;<br>    <span class="hljs-keyword">private</span> Topic topic;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">Publisher</span><span class="hljs-params">(String topicName)</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>        <br>    	factory = <span class="hljs-keyword">new</span> ActiveMQConnectionFactory(brokerURL);<br>    	connection = factory.createConnection();<br>        <br>        session = connection.createSession(<span class="hljs-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);<br>        topic = session.createTopic(topicName);<br>        producer = session.createProducer(topic);<br>        <br>        connection.start();<br>    &#125;    <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">close</span><span class="hljs-params">()</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>        <span class="hljs-keyword">if</span> (connection != <span class="hljs-keyword">null</span>) &#123;<br>            connection.close();<br>        &#125;<br>    &#125;    <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>    	Publisher publisher = <span class="hljs-keyword">new</span> Publisher(<span class="hljs-string">&quot;MYTOPIC&quot;</span>);<br>    	System.out.println(args[<span class="hljs-number">0</span>]) ; <br>    	<span class="hljs-keyword">while</span> ( <span class="hljs-keyword">true</span> ) &#123;<br>    		publisher.sendMessage(args[<span class="hljs-number">0</span>]);<br>        	<span class="hljs-keyword">try</span> &#123;<br>                Thread.sleep(<span class="hljs-number">1000</span>);<br>            &#125; <span class="hljs-keyword">catch</span> (InterruptedException e) &#123;<br>                <span class="hljs-comment">// TODO Auto-generated catch block</span><br>                publisher.close();<br>                e.printStackTrace();<br>            &#125;<br>    	&#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendMessage</span><span class="hljs-params">(String UID )</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>        Random random = <span class="hljs-keyword">new</span> Random( ) ;<br>    	<span class="hljs-keyword">int</span> num = Integer.parseInt(UID) ;<br>        <span class="hljs-keyword">double</span> mean = num ; <br>        <span class="hljs-keyword">double</span> stdDev = <span class="hljs-number">1</span> ; <br>        <span class="hljs-keyword">double</span> randomNumner = random.nextGaussian() * stdDev + mean ; <br>        Message message = session.createTextMessage(UID+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(randomNumner));<br>        <span class="hljs-comment">//for(int i=0;i&lt;15;i++)&#123;</span><br>        producer.send(message);<br>        System.out.println(<span class="hljs-string">&quot;Sent a message!&quot;</span>);<br>        <span class="hljs-comment">//&#125;</span><br>    &#125;	<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">sendData</span> <span class="hljs-params">( String Data )</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>    	Message message = session.createTextMessage(Data) ; <br>    	producer.send(message);<br>    	System.out.println (<span class="hljs-string">&quot;Sent a Data!&quot;</span>) ; <br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="ASyncConsumer-java"><a href="#ASyncConsumer-java" class="headerlink" title="ASyncConsumer.java"></a>ASyncConsumer.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br><span class="line">98</span><br><span class="line">99</span><br><span class="line">100</span><br><span class="line">101</span><br><span class="line">102</span><br><span class="line">103</span><br><span class="line">104</span><br><span class="line">105</span><br><span class="line">106</span><br><span class="line">107</span><br><span class="line">108</span><br><span class="line">109</span><br><span class="line">110</span><br><span class="line">111</span><br><span class="line">112</span><br><span class="line">113</span><br><span class="line">114</span><br><span class="line">115</span><br><span class="line">116</span><br><span class="line">117</span><br><span class="line">118</span><br><span class="line">119</span><br><span class="line">120</span><br><span class="line">121</span><br><span class="line">122</span><br><span class="line">123</span><br><span class="line">124</span><br><span class="line">125</span><br><span class="line">126</span><br><span class="line">127</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> jakarta.jms.Connection;<br><span class="hljs-keyword">import</span> jakarta.jms.ConnectionFactory;<br><span class="hljs-keyword">import</span> jakarta.jms.Destination;<br><span class="hljs-keyword">import</span> jakarta.jms.JMSException;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageConsumer;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageProducer;<br><span class="hljs-keyword">import</span> jakarta.jms.Session;<br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.TextMessage;<br><span class="hljs-keyword">import</span> jakarta.jms.Topic;<br><span class="hljs-keyword">import</span> java.util.ArrayList ; <br><span class="hljs-keyword">import</span> java.util.List; <br><br><span class="hljs-keyword">import</span> org.apache.activemq.ActiveMQConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ASyncConsumer</span> </span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> List&lt;String&gt; messages ; <br>    <span class="hljs-keyword">private</span> List&lt;Double&gt;[] arrayOfLists = <span class="hljs-keyword">new</span> List[<span class="hljs-number">5</span>] ;  <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ASyncConsumer</span> <span class="hljs-params">( )</span> </span>&#123;<br>        messages = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;() ; <br>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span> ; i &lt; arrayOfLists.length ; i ++ ) &#123;<br>            arrayOfLists[i] = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;() ; <br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">storeMessage</span> <span class="hljs-params">( String message )</span> </span>&#123; <br>        messages.add(message) ; <br>        String[] parts = message.split(<span class="hljs-string">&quot;\\+&quot;</span>) ; <br>        String intPart = parts[<span class="hljs-number">0</span>] ; <br>        String doublePart = parts[<span class="hljs-number">1</span>] ; <br>        <span class="hljs-keyword">int</span> uid = Integer.parseInt(intPart) ; <br>        <span class="hljs-keyword">double</span> val = Double.parseDouble(doublePart) ; <br>        arrayOfLists[uid].add(val) ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> List&lt;String&gt; <span class="hljs-title">getMessages</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> messages ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">printMessages</span> <span class="hljs-params">( )</span> </span>&#123;<br>        System.out.println(<span class="hljs-string">&quot;Messages:&quot;</span>) ; <br>        <span class="hljs-keyword">for</span> ( String message : messages ) &#123;<br>            System.out.print ( <span class="hljs-string">&quot;orz&quot;</span> + message ) ; <br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> <span class="hljs-title">calculateMean</span><span class="hljs-params">(List&lt;Double&gt; data)</span> </span>&#123;<br>        <span class="hljs-keyword">double</span> sum = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">double</span> value : data) &#123;<br>            sum += value;<br>        &#125;<br>        <span class="hljs-keyword">if</span> ( data.size() == <span class="hljs-number">0</span> ) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> ; <br>        <span class="hljs-keyword">return</span> sum / data.size();<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">double</span> <span class="hljs-title">calculateVariance</span><span class="hljs-params">(List&lt;Double&gt; data, <span class="hljs-keyword">double</span> mean)</span> </span>&#123;<br>        <span class="hljs-keyword">double</span> sumSquaredDiff = <span class="hljs-number">0</span>;<br>        <span class="hljs-keyword">for</span> (<span class="hljs-keyword">double</span> value : data) &#123;<br>            sumSquaredDiff += Math.pow(value - mean, <span class="hljs-number">2</span>);<br>        &#125;<br>        <span class="hljs-keyword">if</span> ( data.size() == <span class="hljs-number">0</span> ) <span class="hljs-keyword">return</span> <span class="hljs-number">0</span> ; <br>        <span class="hljs-keyword">return</span> sumSquaredDiff / data.size();<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">publisher</span> <span class="hljs-params">( String topicname )</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>        Publisher publisher = <span class="hljs-keyword">new</span> Publisher(<span class="hljs-string">&quot;DATA&quot;</span>);<br>        <span class="hljs-keyword">int</span> n = <span class="hljs-number">5</span> ; <br>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">0</span> ; i &lt; <span class="hljs-number">5</span> ; i ++ ) &#123;<br>            <span class="hljs-keyword">double</span> mean = calculateMean (arrayOfLists[i].subList(Math.max(arrayOfLists[i].size()-n, <span class="hljs-number">0</span>),arrayOfLists[i].size())) ; <br>            <span class="hljs-keyword">double</span> variance = calculateVariance (arrayOfLists[i].subList(Math.max(arrayOfLists[i].size()-n, <span class="hljs-number">0</span>),arrayOfLists[i].size()),mean) ; <br>            <span class="hljs-keyword">double</span> Max = arrayOfLists[i].stream().mapToDouble(Double::doubleValue).max().orElse(<span class="hljs-number">0</span>) ; <br>            <span class="hljs-keyword">double</span> Min = arrayOfLists[i].stream().mapToDouble(Double::doubleValue).min().orElse(<span class="hljs-number">0</span>) ;<br>            <span class="hljs-comment">//if ( Max == Double.NaN ) Max = 0 ; </span><br>            <span class="hljs-comment">//if ( Min == Double.NaN ) Min = 0 ; </span><br>            <span class="hljs-keyword">double</span> cur = <span class="hljs-number">0</span> ; <br>            <span class="hljs-keyword">if</span> ( arrayOfLists[i].size() != <span class="hljs-number">0</span> )<br>                cur = arrayOfLists[i].get(arrayOfLists[i].size()-<span class="hljs-number">1</span>) ; <br>            <span class="hljs-keyword">else</span> <br>                cur = <span class="hljs-number">0</span> ; <br>            String Data = Integer.toString(i)+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(mean)+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(variance)+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(Max)+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(Min)+<span class="hljs-string">&quot;+&quot;</span>+Double.toString(cur); <br>            publisher.sendData(Data);<br>        &#125;<br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>    	ASyncConsumer consumer = <span class="hljs-keyword">new</span> ASyncConsumer ( ) ; <br>    	<br>        String brokerURL = <span class="hljs-string">&quot;tcp://localhost:61616&quot;</span>;<br>        ConnectionFactory factory = <span class="hljs-keyword">null</span>;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        Session session = <span class="hljs-keyword">null</span>;<br>        Topic topic = <span class="hljs-keyword">null</span>;<br>        MessageConsumer messageConsumer = <span class="hljs-keyword">null</span>;<br>        MyListener listener = <span class="hljs-keyword">null</span>;<br>        <br>        <br>        <span class="hljs-keyword">try</span> &#123;<br>            factory = <span class="hljs-keyword">new</span> ActiveMQConnectionFactory(brokerURL);<br>            connection = factory.createConnection();<br>                        <br>            session = connection.createSession(<span class="hljs-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);<br>            topic = session.createTopic(<span class="hljs-string">&quot;MYTOPIC&quot;</span>);<br><br>            messageConsumer = session.createConsumer(topic);<br>            <br>            listener = <span class="hljs-keyword">new</span> MyListener(consumer);<br>            <br>            messageConsumer.setMessageListener(listener);<br>            <br>            connection.start();<br>            <br>            <span class="hljs-comment">//consumer.printMessages();</span><br>            <br>            System.out.println(<span class="hljs-string">&quot;Press any key to exit.&quot;</span>);<br>            System.in.read();   <span class="hljs-comment">// Pause</span><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            connection.close();<br>        &#125;<br>    &#125;<br>    <br>&#125;<br><br></code></pre></td></tr></table></figure>

<h2 id="ShowConsumer-1"><a href="#ShowConsumer-1" class="headerlink" title="ShowConsumer"></a>ShowConsumer</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br><span class="line">83</span><br><span class="line">84</span><br><span class="line">85</span><br><span class="line">86</span><br><span class="line">87</span><br><span class="line">88</span><br><span class="line">89</span><br><span class="line">90</span><br><span class="line">91</span><br><span class="line">92</span><br><span class="line">93</span><br><span class="line">94</span><br><span class="line">95</span><br><span class="line">96</span><br><span class="line">97</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> jakarta.jms.Connection;<br><span class="hljs-keyword">import</span> jakarta.jms.ConnectionFactory;<br><span class="hljs-keyword">import</span> jakarta.jms.Destination;<br><span class="hljs-keyword">import</span> jakarta.jms.JMSException;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageConsumer;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageProducer;<br><span class="hljs-keyword">import</span> jakarta.jms.Session;<br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.TextMessage;<br><span class="hljs-keyword">import</span> jakarta.jms.Topic;<br><span class="hljs-keyword">import</span> java.util.ArrayList ; <br><span class="hljs-keyword">import</span> java.util.List; <br><br><span class="hljs-keyword">import</span> org.apache.activemq.ActiveMQConnectionFactory;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">ShowConsumer</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> List&lt;Double&gt;[][] arrayOfLists = <span class="hljs-keyword">new</span> List[<span class="hljs-number">6</span>][<span class="hljs-number">5</span>] ; <br>    RealTimeChart[] chart = <span class="hljs-keyword">new</span> RealTimeChart[<span class="hljs-number">6</span>] ; <br>    <span class="hljs-comment">// 数组1，2，3，4,5分别代表均值，方差，最大值，最小值,目前值</span><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">ShowConsumer</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span> ; i &lt; <span class="hljs-number">6</span> ; i ++ ) &#123;<br>            <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> j = <span class="hljs-number">0</span> ; j &lt; <span class="hljs-number">5</span> ; j ++ ) &#123;<br>                arrayOfLists[i][j] = <span class="hljs-keyword">new</span> ArrayList&lt;&gt;() ; <br>            &#125;<br>        &#125;<br>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span> ; i &lt; <span class="hljs-number">6</span> ; i ++ ) &#123;<br>            chart[i] = <span class="hljs-keyword">new</span> RealTimeChart ( <span class="hljs-string">&quot;History Data&quot;</span> , <span class="hljs-string">&quot;UID&quot;</span>+Integer.toString(i) , <span class="hljs-number">500</span> ) ; <br>        &#125;<br>    &#125;<br><br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">paint</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">for</span> ( <span class="hljs-keyword">int</span> i = <span class="hljs-number">1</span> ; i &lt; <span class="hljs-number">6</span> ; i ++ ) &#123;<br>            <span class="hljs-keyword">if</span> ( arrayOfLists[i][<span class="hljs-number">4</span>].size() != <span class="hljs-number">0</span> )<br>                chart[i].plot(arrayOfLists[i][<span class="hljs-number">4</span>].get(arrayOfLists[i][<span class="hljs-number">4</span>].size()-<span class="hljs-number">1</span>));<br>        &#125;<br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">storeMessage</span> <span class="hljs-params">( String message )</span> </span>&#123; <br>        String[] parts = message.split(<span class="hljs-string">&quot;\\+&quot;</span>) ; <br>        String uidPart = parts[<span class="hljs-number">0</span>] ; <br>        String meanPart = parts[<span class="hljs-number">1</span>] ; <br>        String variancePart = parts[<span class="hljs-number">2</span>] ; <br>        String maxPart = parts[<span class="hljs-number">3</span>] ; <br>        String minPart = parts[<span class="hljs-number">4</span>] ; <br>        String curPart = parts[<span class="hljs-number">5</span>] ; <br>        <span class="hljs-keyword">int</span> uid = Integer.parseInt(uidPart) ; <br>        <span class="hljs-keyword">double</span> mean = Double.parseDouble(meanPart) ; <br>        <span class="hljs-keyword">double</span> variance = Double.parseDouble(variancePart) ;<br>        <span class="hljs-keyword">double</span> Max = Double.parseDouble(maxPart) ; <br>        <span class="hljs-keyword">double</span> Min = Double.parseDouble(minPart) ; <br>        <span class="hljs-keyword">double</span> cur = Double.parseDouble(curPart) ; <br>        arrayOfLists[uid][<span class="hljs-number">0</span>].add(mean) ; <br>        arrayOfLists[uid][<span class="hljs-number">1</span>].add(variance) ;<br>        arrayOfLists[uid][<span class="hljs-number">2</span>].add(Max) ;<br>        arrayOfLists[uid][<span class="hljs-number">3</span>].add(Min) ;<br>        arrayOfLists[uid][<span class="hljs-number">4</span>].add(cur) ; <br>    &#125;<br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> <span class="hljs-keyword">throws</span> JMSException </span>&#123;<br>    	ShowConsumer consumer = <span class="hljs-keyword">new</span> ShowConsumer ( ) ; <br>    	<br>        String brokerURL = <span class="hljs-string">&quot;tcp://localhost:61616&quot;</span>;<br>        ConnectionFactory factory = <span class="hljs-keyword">null</span>;<br>        Connection connection = <span class="hljs-keyword">null</span>;<br>        Session session = <span class="hljs-keyword">null</span>;<br>        Topic topic = <span class="hljs-keyword">null</span>;<br>        MessageConsumer messageConsumer = <span class="hljs-keyword">null</span>;<br>        MyListener2 listener = <span class="hljs-keyword">null</span>;<br>        <br>        <br>        <span class="hljs-keyword">try</span> &#123;<br>            factory = <span class="hljs-keyword">new</span> ActiveMQConnectionFactory(brokerURL);<br>            connection = factory.createConnection();<br>                        <br>            session = connection.createSession(<span class="hljs-keyword">false</span>, Session.AUTO_ACKNOWLEDGE);<br>            topic = session.createTopic(<span class="hljs-string">&quot;DATA&quot;</span>);<br><br>            messageConsumer = session.createConsumer(topic);<br>            <br>            listener = <span class="hljs-keyword">new</span> MyListener2(consumer);<br>            <br>            messageConsumer.setMessageListener(listener);<br>            <br>            connection.start();<br>            <br>            <span class="hljs-comment">//consumer.printMessages();</span><br>            <br>            System.out.println(<span class="hljs-string">&quot;Press any key to exit.&quot;</span>);<br>            System.in.read();   <span class="hljs-comment">// Pause</span><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125; <span class="hljs-keyword">finally</span> &#123;<br>            connection.close();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="MyListener2-java"><a href="#MyListener2-java" class="headerlink" title="MyListener2.java"></a>MyListener2.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.MessageListener;<br><span class="hljs-keyword">import</span> jakarta.jms.ObjectMessage;<br><span class="hljs-keyword">import</span> jakarta.jms.Message;<br><span class="hljs-keyword">import</span> jakarta.jms.TextMessage;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MyListener2</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">MessageListener</span> </span>&#123;<br>    <br>    <span class="hljs-keyword">private</span> ShowConsumer consumer ; <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">MyListener2</span> <span class="hljs-params">( ShowConsumer consumer )</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.consumer = consumer ; <br>    &#125;<br><br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">onMessage</span><span class="hljs-params">(Message message)</span> </span>&#123;<br>        <span class="hljs-keyword">try</span> &#123;<br>            String text = ((TextMessage) message).getText() ; <br>            System.out.println(<span class="hljs-string">&quot;Received a message2: &quot;</span>+text);<br>            consumer.storeMessage(text);<br>            consumer.paint ( ) ; <br>            <span class="hljs-comment">//consumer.publisher(&quot;ACK&quot;);</span><br>        &#125; <span class="hljs-keyword">catch</span> (Exception e) &#123;<br>            e.printStackTrace();<br>        &#125;<br>    &#125;<br><br>&#125;<br></code></pre></td></tr></table></figure>

<h2 id="RealTimeChart-java"><a href="#RealTimeChart-java" class="headerlink" title="RealTimeChart.java"></a>RealTimeChart.java</h2><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br></pre></td><td class="code"><pre><code class="hljs java"><br><span class="hljs-keyword">import</span> java.util.LinkedList;<br><span class="hljs-keyword">import</span> java.util.List;<br><br><span class="hljs-keyword">import</span> javax.swing.JFrame;<br><br><span class="hljs-keyword">import</span> org.knowm.xchart.SwingWrapper;<br><span class="hljs-keyword">import</span> org.knowm.xchart.XYChart;<br><span class="hljs-keyword">import</span> org.knowm.xchart.XYChartBuilder;<br><span class="hljs-keyword">import</span> org.knowm.xchart.style.Styler.ChartTheme;<br><span class="hljs-keyword">import</span> org.knowm.xchart.style.Styler.LegendLayout;<br><span class="hljs-keyword">import</span> org.knowm.xchart.style.Styler.LegendPosition;<br><br><span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">RealTimeChart</span> </span>&#123;<br>    <span class="hljs-keyword">private</span> SwingWrapper&lt;XYChart&gt; swingWrapper ; <br>    <span class="hljs-keyword">private</span> XYChart chart ; <br>    <span class="hljs-keyword">private</span> JFrame frame ; <br>    <br>    <span class="hljs-keyword">private</span> String title ; <br>    <span class="hljs-keyword">private</span> String seriesName ; <br>    <span class="hljs-keyword">private</span> List&lt;Double&gt; seriesData ; <br>    <span class="hljs-keyword">private</span> <span class="hljs-keyword">int</span> size = <span class="hljs-number">1000</span> ; <br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">int</span> <span class="hljs-title">getSize</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> size ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getSeriesName</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> seriesName ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setSeeriesName</span> <span class="hljs-params">( String seriesName )</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.seriesName = seriesName ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">getTitle</span> <span class="hljs-params">( )</span> </span>&#123;<br>        <span class="hljs-keyword">return</span> title ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">setTitle</span> <span class="hljs-params">( String title )</span> </span>&#123;<br>        <span class="hljs-keyword">this</span>.title = title ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RealTimeChart</span> <span class="hljs-params">( String title , String seriesName )</span> </span>&#123;<br>        <span class="hljs-keyword">super</span> ( ) ; <br>        <span class="hljs-keyword">this</span>.seriesName = seriesName ; <br>        <span class="hljs-keyword">this</span>.title = title ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-title">RealTimeChart</span> <span class="hljs-params">( String title , String seriesName , <span class="hljs-keyword">int</span> size )</span> </span>&#123;<br>        <span class="hljs-keyword">super</span> ( ) ; <br>        <span class="hljs-keyword">this</span>.seriesName = seriesName ; <br>        <span class="hljs-keyword">this</span>.title = title ;<br>        <span class="hljs-keyword">this</span>.size = size ; <br>    &#125;<br>    <br>    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">void</span> <span class="hljs-title">plot</span> <span class="hljs-params">( <span class="hljs-keyword">double</span> data )</span> </span>&#123;<br>        <span class="hljs-keyword">if</span> ( seriesData == <span class="hljs-keyword">null</span> ) &#123;<br>            seriesData = <span class="hljs-keyword">new</span> LinkedList&lt;&gt;() ; <br>        &#125;<br>        <span class="hljs-keyword">if</span> ( seriesData.size( ) == <span class="hljs-keyword">this</span>.size ) &#123;<br>            seriesData.clear ( ) ; <br>        &#125;<br>        seriesData.add(data) ; <br>        <br>        <span class="hljs-keyword">if</span> ( swingWrapper == <span class="hljs-keyword">null</span> ) &#123;<br>            chart = <span class="hljs-keyword">new</span> XYChartBuilder().width(<span class="hljs-number">600</span>).height(<span class="hljs-number">450</span>).theme(ChartTheme.Matlab).title(title).build();<br>            chart.addSeries(seriesName, <span class="hljs-keyword">null</span>, seriesData);<br>            chart.getStyler().setLegendPosition(LegendPosition.OutsideS);<span class="hljs-comment">// 设置legend的位置为外底部</span><br>            chart.getStyler().setLegendLayout(LegendLayout.Horizontal);<span class="hljs-comment">// 设置legend的排列方式为水平排列</span><br> <br>            swingWrapper = <span class="hljs-keyword">new</span> SwingWrapper&lt;XYChart&gt;(chart);<br>            frame = swingWrapper.displayChart();<br>            frame.setDefaultCloseOperation(JFrame.DISPOSE_ON_CLOSE);<span class="hljs-comment">// 防止关闭窗口时退出</span><br>        &#125;<br>        <span class="hljs-keyword">else</span> &#123; <br>            chart.updateXYSeries ( seriesName , <span class="hljs-keyword">null</span> , seriesData , <span class="hljs-keyword">null</span> ) ; <br>            swingWrapper.repaintChart();<br>        &#125;<br>    &#125;<br>&#125;<br></code></pre></td></tr></table></figure>

<h1 id="实现效果"><a href="#实现效果" class="headerlink" title="实现效果"></a>实现效果</h1><p><img src="/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/Show1.png"><br>可以看到不同的产生器的数据分布在不同的值之间，产生器1徘徊在1之间，产生器2徘徊在2之间以此类推<br>可以看到无论是处理器还是产生器在命令指示符中均正常工作，达到实验预期！<br><img src="/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/topic.png"><br>观察topic界面，可以看出在正常工作，符合预期！</p>

  </article>

  
      
    <div class="nexmoe-post-copyright">
        <strong>本文作者：</strong>Amentiraz<br>
        <strong>本文链接：</strong><a href="http://1152396492.github.io/2024/05/11/%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A/" title="http:&#x2F;&#x2F;1152396492.github.io&#x2F;2024&#x2F;05&#x2F;11&#x2F;%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A&#x2F;" target="_blank" rel="noopener">http:&#x2F;&#x2F;1152396492.github.io&#x2F;2024&#x2F;05&#x2F;11&#x2F;%E5%88%86%E5%B8%83%E5%BC%8FMOM%E4%BD%9C%E4%B8%9A&#x2F;</a><br>
        
            <strong>版权声明：</strong>本文采用 <a href="https://creativecommons.org/licenses/by-nc-sa/3.0/cn/deed.zh" target="_blank">CC BY-NC-SA 3.0 CN</a> 协议进行许可
        
    </div>


  
  
  <div class="nexmoe-post-meta nexmoe-rainbow">
    
        <a class="nexmoefont icon-appstore-fill -link" href="/categories/%E4%BB%A3%E7%A0%81/">代码</a>
    
    
        <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E4%BB%A3%E7%A0%81/" rel="tag">代码</a> <a class="nexmoefont icon-tag-fill -none-link" href="/tags/%E5%88%86%E5%B8%83%E5%BC%8F/" rel="tag">分布式</a>
    
</div>

  
      <div class="nexmoe-post-footer">
          <section class="nexmoe-comment">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.css">
<div id="gitalk"></div>
<script src="https://cdn.jsdelivr.net/npm/gitalk@latest/dist/gitalk.min.js"></script>
<script type="text/javascript">
    var gitalk = new Gitalk({
        clientID: 'd792bb4144ed2b426d10',
        clientSecret: '812d33a3a53d9f83437ed1e71c573a8b222a93f1',
        id: window.location.pathname,
        repo: '1152396492.github.io',
        owner: '1152396492',
        admin: '1152396492'
    })
    gitalk.render('gitalk')
</script>
</section>
      </div>
  
</div>
            <div class="nexmoe-post-right">
              <div class="nexmoe-fixed">
                  <div class="nexmoe-tool"> 
                    
                      
                        
                          
                          
                              <button class="mdui-fab catalog" style="overflow:unset;">
                                  <i class="nexmoefont icon-i-catalog"></i>
                                  <div class="nexmoe-toc">
                                      <ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#%E9%97%AE%E9%A2%98%E9%87%8D%E8%BF%B0"><span class="toc-number">1.</span> <span class="toc-text">问题重述</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E9%AA%8C%E5%8E%9F%E7%90%86"><span class="toc-number">2.</span> <span class="toc-text">实验原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83"><span class="toc-number">3.</span> <span class="toc-text">开发环境</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E8%BD%AF%E4%BB%B6%E7%89%88%E6%9C%AC"><span class="toc-number">3.1.</span> <span class="toc-text">软件版本</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#pom%E6%96%87%E4%BB%B6%E9%85%8D%E7%BD%AE"><span class="toc-number">3.2.</span> <span class="toc-text">pom文件配置</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E8%AE%BE%E8%AE%A1%E6%80%9D%E8%B7%AF"><span class="toc-number">4.</span> <span class="toc-text">设计思路</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#%E6%9E%84%E6%9E%B6%E5%9B%BE"><span class="toc-number">4.1.</span> <span class="toc-text">构架图</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#%E5%90%84%E4%B8%AA%E4%BB%A3%E7%A0%81%E7%9A%84%E7%94%A8%E9%80%94"><span class="toc-number">4.2.</span> <span class="toc-text">各个代码的用途</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#Publisher"><span class="toc-number">4.2.1.</span> <span class="toc-text">Publisher</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ASyncConsumer"><span class="toc-number">4.2.2.</span> <span class="toc-text">ASyncConsumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyListener"><span class="toc-number">4.2.3.</span> <span class="toc-text">MyListener</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#ShowConsumer"><span class="toc-number">4.2.4.</span> <span class="toc-text">ShowConsumer</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#MyListener1"><span class="toc-number">4.2.5.</span> <span class="toc-text">MyListener1</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#RealTimeChart"><span class="toc-number">4.2.6.</span> <span class="toc-text">RealTimeChart</span></a></li></ol></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Commands"><span class="toc-number">5.</span> <span class="toc-text">Commands</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#JAVA%E7%A8%8B%E5%BA%8F"><span class="toc-number">6.</span> <span class="toc-text">JAVA程序</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MyListener-java"><span class="toc-number">6.1.</span> <span class="toc-text">MyListener.java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Publisher-java"><span class="toc-number">6.2.</span> <span class="toc-text">Publisher.java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ASyncConsumer-java"><span class="toc-number">6.3.</span> <span class="toc-text">ASyncConsumer.java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#ShowConsumer-1"><span class="toc-number">6.4.</span> <span class="toc-text">ShowConsumer</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#MyListener2-java"><span class="toc-number">6.5.</span> <span class="toc-text">MyListener2.java</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RealTimeChart-java"><span class="toc-number">6.6.</span> <span class="toc-text">RealTimeChart.java</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#%E5%AE%9E%E7%8E%B0%E6%95%88%E6%9E%9C"><span class="toc-number">7.</span> <span class="toc-text">实现效果</span></a></li></ol>
                                  </div>
                              </button>
                          
                          
                      
                    
                      <a href="#nexmoe-content" class="toc-link" aria-label="回到顶部" title="top"><button class="mdui-fab mdui-ripple"><i class="nexmoefont icon-caret-top"></i></button></a>
                  </div>
              </div>
            </div>
        </div>
    </div>
    <script src="https://cdn.jsdelivr.net/combine/npm/lazysizes@5.1.0/lazysizes.min.js,npm/mdui@0.4.3/dist/js/mdui.min.js?v=1"></script>
<script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

 

<script async src="/js/app.js?v=1727004197797"></script>

<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.8.1/dist/js/jquery.justifiedGallery.min.js"></script>
<script>
	$(".justified-gallery").justifiedGallery({
		rowHeight: 160,
		margins: 10,
	});
</script>


    





</body>

</html>
